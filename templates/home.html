<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>Library</title>
  </head>
  <body>

    <h1>ðŸ“š My Book Library</h1>

    <div>
      <strong>Sort by:</strong>
      <a href="/?sort=title">Title</a> |
      <a href="/?sort=author">Author</a>
    </div>

    <div style="margin-top: 10px;">
      <a href="/add_author" class="button">âž• Add Author</a>
      <a href="/add_book" class="button">âž• Add Book</a>
    </div>

    <form method="GET" action="/">
      <label> Search by:
        <input type="text" name="search" placeholder="Search books by title..." required>
      </label>
      <input type="submit" value="Search">
    </form>
    {% if message %}
      <p><em>{{ message }}</em></p>
    {% endif %}
    <hr>

    {% if request.args.get('message') %}
      <p style="color: green;">{{ request.args.get('message') }}</p>
    {% endif %}

    {% for book in books %}
      <div>
        <h3>{{ book.title }}</h3>
        <p><strong>Author:</strong> {{ book.author.name }}</p>
        <p><strong>Published:</strong> {{ book.publication_year }}</p>
        <img src="https://covers.openlibrary.org/b/isbn/{{ book.isbn }}-M.jpg" alt="Book cover">
        <hr>
        <form action="{{ url_for('delete_book', book_id=book.id) }}" method="POST" style="display:inline;">
        <button type="submit" class="delete-button">
          ðŸ—‘ Delete Book
        </button>
      </form>
      </div>
    {% endfor %}

  </body>
</html>